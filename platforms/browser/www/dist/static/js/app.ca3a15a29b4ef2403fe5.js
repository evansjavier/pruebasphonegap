webpackJsonp([1],{"2cHg":function(e,t){},"7ljk":function(e,t){},AYhb:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),r={name:"App",computed:{isLoggedIn:function(){return!!localStorage.getItem("token")}},methods:{logout:function(){localStorage.removeItem("token"),delete axios.defaults.headers.common.Authorization,this.$router.push("login")}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-white shadow-sm"},[s("div",{staticClass:"container"},[s("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[s("img",{staticClass:"d-inline-block",attrs:{src:"https://dataprolegal.com/wp-content/uploads/2018/06/Logo-comunidad_3.png",width:"auto",height:"45px"}})]),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[e.isLoggedIn?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{path:"/schedule-records-index"}}},[e._v("\n                          Fichas\n                        ")])],1):e._e()]),e._v(" "),s("ul",{staticClass:"navbar-nav ml-auto"},[e.isLoggedIn?s("li",{staticClass:"nav-item dropdown"},[e._m(1),e._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"navbarDropdown"}},[s("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("\n                                  Cerrar sesión\n                              ")])])]):s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"login"}}},[e._v("\n                            Login\n                          ")])],1)])])],1)]),e._v(" "),s("main",{staticClass:"py-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"alert-container"}),e._v(" "),s("router-view")],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"{{ __('Toggle navigation') }}"}},[t("span",{staticClass:"navbar-toggler-icon"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{pre:!0,attrs:{id:"navbarDropdown",class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                              USERNAME "),t("span",{pre:!0,attrs:{class:"caret"}})])}]};var i=s("VU/8")(r,o,!1,function(e){s("AYhb")},null,null).exports,n=s("/ocq"),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("h1",[e._v(e._s(e.msg))]),e._v(" "),s("h2",[e._v("Essential Links")]),e._v(" "),s("ul",[s("li",[s("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/login"}}},[e._v("LOGIN - ROUTER")])],1),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),s("br"),e._v(" "),e._m(4)]),e._v(" "),s("h2",[e._v("Ecosystem")]),e._v(" "),e._m(5)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[this._v("\n        Core Docs\n      ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[this._v("\n        Forum\n      ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[this._v("\n        Community Chat\n      ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[this._v("\n        Twitter\n      ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[this._v("\n        Docs for This Template\n      ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var c=s("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(e){s("7ljk")},"data-v-5d4fa992",null).exports,d={data:function(){return{user:{email:null,password:null,remember_me:!1},errors:{email:[],password:[],remember_me:[]}}},methods:{submit:function(e){var t=this,s=new URLSearchParams;s.append("email",e.email),s.append("password",e.password),s.append("remember_me",e.remember_me),axios.post(API.login,s).then(function(e){console.log("response: ",e);var s=e.data.access_token;localStorage.setItem("token",s),axios.defaults.headers.common.Authorization="Bearer "+s,console.log("token local establecido: ",localStorage.getItem("token")),t.$router.push("schedule")}).catch(function(e){console.log("error: ",e)})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[e._v("Acceder")]),e._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.submit(e.user)}}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"email"}},[e._v("Correo electrónico")]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",class:{"is-invalid":e.errors.email.lenght},attrs:{id:"email",type:"email",name:"email",required:"",autocomplete:"email",autofocus:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e._v(" "),e._l(e.errors.email,function(t){return s("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[s("strong",[e._v(e._s(e.$error))])])})],2)]),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password"}},[e._v("Contraseña")]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",class:{"is-invalid":e.errors.password.lenght},attrs:{id:"password",type:"password",name:"password",required:"",autocomplete:"current-password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e._v(" "),e._l(e.errors.email,function(t){return s("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[s("strong",[e._v(e._s(e.$error))])])})],2)]),e._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-6 offset-md-4"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.remember_me,expression:"user.remember_me"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"remember",id:"remember"},domProps:{checked:Array.isArray(e.user.remember_me)?e._i(e.user.remember_me,null)>-1:e.user.remember_me},on:{change:function(t){var s=e.user.remember_me,a=t.target,r=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&e.$set(e.user,"remember_me",s.concat([null])):o>-1&&e.$set(e.user,"remember_me",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.user,"remember_me",r)}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"remember"}},[e._v("\n                                        Recuérdame\n                                    ")])])])]),e._v(" "),e._m(0)])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{staticClass:"btn btn-primary"},[this._v("\n                                    Acceder\n                                ")])])])}]};var m=s("VU/8")(d,u,!1,function(e){s("2cHg")},null,null).exports,v=s("woOf"),_=s.n(v),h=s("pFYg"),p=s.n(h),f=s("7t+N"),g=s.n(f),b={watch:{status:function(){console.log(this.status)},schedule_record:{handler:function(){1==this.schedule_record.executed&&(this.schedule_record.motive_id=null,this.schedule_record.motive_details=null,this.submitSignIn())},deep:!0}},data:function(){return{status:"initial",errors:{executed:[],motive_id:[],motive_details:[]},schedule_record:{executed:null,motive_id:"",motive_details:null},info:{current_date:"",hours:""},message:"",motive_list:[]}},mounted:function(){var e=this;axios.get("schedule-records/today").then(function(t){var s=t.data;"undefined"==p()(s.id)?(e.status="ready",e.fillMotives()):e.status="sent",e.info=_()(e.info,{current_date:s.date,hours:s.hours})}).catch(function(t){switch(e.status="fatal-error",t.response.status){case 400:e.message=t.response.data.message;break;default:e.message="Ha ocurrido un error inesperado, si este persiste contacte con el administrador del sistema."}})},methods:{expandDetails:function(){var e=g()("#schedule_record_motive").find('option[value="'+this.schedule_record.motive_id+'"]'),t=g()("#schedule_record_more_details");e.length>0&&e.attr("need_details")>0?t.parents(".form-group").slideDown():t.parents(".form-group").slideUp()},submitSignIn:function(){var e=this;e.status="submitting",e.resetErrors();var t=new URLSearchParams;t.append("executed",e.schedule_record.executed?e.schedule_record.executed:""),t.append("motive_id",e.schedule_record.motive_id?e.schedule_record.motive_id:""),t.append("motive_details",e.schedule_record.motive_details?e.schedule_record.motive_details:""),axios.post("sign-on",t).then(function(t){g()("#motiveModal").modal("hide"),g()("#successModal").modal(),e.status="sent",console.log(e.schedule_record)}).catch(function(t,s){switch(e.status="error",t.response.status){case 422:e.errors=_()(e.errors,t.response.data.errors);break;default:alert("Ha ocurrido un error inesperado, si el error persiste contacta con el administrador del sistema.")}})},fillMotives:function(){var e=this,t=[];axios.get("motive/list").then(function(e){t=e.data}).catch(function(e){e.response.status,t={id:null,title:"Ocurrio un error al buscar los motivos de tu empresa.",need_details:!1}}).then(function(){e.motive_list=t})},hasError:function(e){return this.errors[e]&&this.errors[e].length>0},resetErrors:function(){var e={};for(var t in this.errors)e[t]=[];this.errors=_()(this.errors,e)}}},C={render:function(){var e=this,t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"text-center"},[a("div",{},[a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=["ready","submitting","error"].indexOf(t.status),expression:"['ready', 'submitting', 'error'].indexOf(status) != -1 "}],staticClass:"card-body"},[a("div",{staticClass:" text-center"},[a("h2",[t._v(t._s(t.info.current_date))]),t._v(" "),a("p",{staticClass:"lead mb-2"},[t._v("¿Ha realizado este horario?")]),t._v(" "),a("p",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.info.hours))]),t._v(" "),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-auto"},[a("label",{staticClass:"btn btn-success exec-btn"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule_record.executed,expression:"schedule_record.executed"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.schedule_record.executed,"1")},on:{change:function(e){return t.$set(t.schedule_record,"executed","1")}}}),t._v("\n                            Si\n                        ")])]),t._v(" "),a("div",{staticClass:"col-auto"},[a("label",{staticClass:"btn btn-danger exec-btn",attrs:{"data-toggle":"modal","data-target":"#motiveModal"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule_record.executed,expression:"schedule_record.executed"}],attrs:{type:"radio",value:"0"},domProps:{checked:t._q(t.schedule_record.executed,"0")},on:{change:function(e){return t.$set(t.schedule_record,"executed","0")}}}),t._v("\n                            No\n                        ")])]),t._v(" "),a("div",{staticClass:"col-12"},[a("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.executed[0])}})])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"motiveModal",tabindex:"-1",role:"dialog","aria-labelledBy":"motiveModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog ",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.schedule_record.motive_id,expression:"schedule_record.motive_id"}],class:"form-control "+(t.hasError("motive_id")?"is-invalid":""),attrs:{id:"schedule_record_motive"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});t.$set(t.schedule_record,"motive_id",e.target.multiple?s:s[0])},function(e){return t.expandDetails()}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Seleccione un motivo")]),t._v(" "),t._l(t.motive_list,function(e){return a("option",{attrs:{need_details:e.need_details?1:0},domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),a("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.motive_id[0])}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{display:"none"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.schedule_record.motive_details,expression:"schedule_record.motive_details"}],class:"form-control "+(t.hasError("more_details")?"is-invalid":""),attrs:{id:"schedule_record_more_details",maxlength:"250",placeholder:"Detalla el motivo"},domProps:{value:t.schedule_record.motive_details},on:{input:function(e){e.target.composing||t.$set(t.schedule_record,"motive_details",e.target.value)}}}),t._v(" "),a("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.motive_details[0])}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.submitSignIn()}}},[t._v("Aceptar")])])])])])])]),t._v(" "),-1!=["initial","sent","fatal-error"].indexOf(t.status)?a("div",{staticClass:"card-body text-center justify-content-center align-items-center d-flex"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"initial"==t.status,expression:"status == 'initial'"}],staticClass:"lead p-4"},[t._v("Cargando...")]),t._v(" "),"fatal-error"==t.status?a("span",{staticClass:"lead p-4"},[t._v("\n                "+t._s(t.message)+"\n            ")]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"sent"==t.status,expression:"status == 'sent'"}],staticClass:"p-4"},[a("h5",{staticClass:"font-weight-bold"},[t._v("Hemos recibido tu ficha de hoy.")]),t._v(" "),a("p",{staticClass:"m-1"},[t._v("Gracias por tu colaboración")]),t._v(" "),a("p",{staticClass:"m-1"},[t._v(t._s(t.info.current_date))])])]):t._e()]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"successModal",tabindex:"-1",role:"dialog","aria-labelledBy":"successModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog ",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body text-left"},[1==t.schedule_record.executed?a("div",[a("h4",{staticClass:"m-0"},[t._v(t._s(t.info.current_date))]),t._v(" "),a("p",{staticClass:"lead m-0"},[t._v(t._s(t.info.hours))])]):a("div",[a("p",{staticClass:"font-weight-bold m-0"},[t._v(t._s(t.motive_list.some(function(t){return t.id==e.schedule_record.motive_id})&&t.motive_list.find(function(t){return t.id==e.schedule_record.motive_id}).title))]),t._v(" "),a("p",{staticClass:"m-0"},[t._v(t._s(t.schedule_record.motive_details))])]),t._v(" "),t._m(2)])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[this._v("Motivo")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[this._v("Gracias por su colaboración")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-center py-4"},[t("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal","aria-label":"Close"}},[this._v("Aceptar")])])}]};var w=s("VU/8")(b,C,!1,function(e){s("OP3J")},"data-v-58cb588e",null).exports;a.a.use(n.a);var x=new n.a({routes:[{path:"/hello",name:"hello",component:c},{path:"/",name:"login",component:m},{path:"/login",name:"login",component:m},{path:"/schedule",name:"schedule",component:w}]}),k=s("mtWM"),y=s.n(k),$=s("Zrlr"),E=s.n($),A=function e(){E()(this,e)};A.login="/login";var j=A;s("K3J8"),s("qb6w");y.a.defaults.baseURL="https://enterprise-evansjavier.c9users.io/api/auth",window.axios=y.a,window.API=j,a.a.config.productionTip=!1;var P=localStorage.getItem("token");P&&(y.a.defaults.headers.common.Authorization="Bearer "+P,x.push("schedule")),console.log("token: ",P),new a.a({el:"#app",router:x,components:{App:i},template:"<App/>"})},OP3J:function(e,t){},qb6w:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ca3a15a29b4ef2403fe5.js.map